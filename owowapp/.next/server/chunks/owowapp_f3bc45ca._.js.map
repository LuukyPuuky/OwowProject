{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/display/ticker.ts"],"sourcesContent":["/**\n * Ticker - A requestAnimationFrame-like solution for Node.js\n * with controllable framerate\n */\nexport class Ticker {\n  private fps: number;\n  private callback:\n    | ((frame: { deltaTime: number; elapsedTime: number }) => void)\n    | null;\n  private isRunning: boolean;\n  private lastFrameTime: number;\n  private frameInterval: number;\n  private timeoutId: NodeJS.Timeout | null = null;\n\n  constructor(options: { fps?: number } = {}) {\n    this.fps = options.fps || 60;\n    this.callback = null;\n    this.isRunning = false;\n    this.lastFrameTime = 0;\n    this.frameInterval = 1000 / this.fps;\n  }\n\n  start(callback: (frame: { deltaTime: number; elapsedTime: number }) => void) {\n    if (this.isRunning) return this;\n\n    this.callback = callback;\n    this.isRunning = true;\n    this.lastFrameTime = Date.now();\n\n    this._tick();\n\n    return this;\n  }\n\n  stop() {\n    this.isRunning = false;\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = null;\n    }\n    return this;\n  }\n\n  private _tick() {\n    if (!this.isRunning) return;\n\n    const now = Date.now();\n    const timeDelta = now - this.lastFrameTime;\n\n    if (timeDelta >= this.frameInterval) {\n      // Adjust for drifting\n      this.lastFrameTime = now - (timeDelta % this.frameInterval);\n\n      // Calculate normalized delta (1.0 = exact frame rate)\n      const normalizedDelta = timeDelta / this.frameInterval;\n\n      if (this.callback) {\n        this.callback({\n          deltaTime: normalizedDelta,\n          elapsedTime: now,\n        });\n      }\n    }\n\n    // Use setTimeout for Node.js compatibility\n    this.timeoutId = setTimeout(() => this._tick(), 0);\n  }\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM;IACH,IAAY;IACZ,SAEC;IACD,UAAmB;IACnB,cAAsB;IACtB,cAAsB;IACtB,YAAmC,KAAK;IAEhD,YAAY,UAA4B,CAAC,CAAC,CAAE;QAC1C,IAAI,CAAC,GAAG,GAAG,QAAQ,GAAG,IAAI;QAC1B,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,aAAa,GAAG,OAAO,IAAI,CAAC,GAAG;IACtC;IAEA,MAAM,QAAqE,EAAE;QAC3E,IAAI,IAAI,CAAC,SAAS,EAAE,OAAO,IAAI;QAE/B,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,aAAa,GAAG,KAAK,GAAG;QAE7B,IAAI,CAAC,KAAK;QAEV,OAAO,IAAI;IACb;IAEA,OAAO;QACL,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,aAAa,IAAI,CAAC,SAAS;YAC3B,IAAI,CAAC,SAAS,GAAG;QACnB;QACA,OAAO,IAAI;IACb;IAEQ,QAAQ;QACd,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;QAErB,MAAM,MAAM,KAAK,GAAG;QACpB,MAAM,YAAY,MAAM,IAAI,CAAC,aAAa;QAE1C,IAAI,aAAa,IAAI,CAAC,aAAa,EAAE;YACnC,sBAAsB;YACtB,IAAI,CAAC,aAAa,GAAG,MAAO,YAAY,IAAI,CAAC,aAAa;YAE1D,sDAAsD;YACtD,MAAM,kBAAkB,YAAY,IAAI,CAAC,aAAa;YAEtD,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,QAAQ,CAAC;oBACZ,WAAW;oBACX,aAAa;gBACf;YACF;QACF;QAEA,2CAA2C;QAC3C,IAAI,CAAC,SAAS,GAAG,WAAW,IAAM,IAAI,CAAC,KAAK,IAAI;IAClD;AACF","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/display/display-manager.ts"],"sourcesContent":["import \"server-only\";\nimport type {\n  DisplayConfig,\n  AnimationFrame,\n  AnimationRenderer,\n} from \"././types\";\n\nexport class DisplayManager {\n  private canvas: HTMLCanvasElement | OffscreenCanvas;\n  private ctx: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D;\n  private config: DisplayConfig;\n  private currentRenderer: AnimationRenderer | null = null;\n\n  constructor(config: DisplayConfig) {\n    this.config = config;\n\n    // Use OffscreenCanvas if available (better for server-side rendering in modern environments)\n    if (typeof OffscreenCanvas !== \"undefined\") {\n      this.canvas = new OffscreenCanvas(config.width, config.height);\n      this.ctx = this.canvas.getContext(\"2d\")!;\n    } else if (typeof document !== \"undefined\") {\n      // Fallback to regular canvas in browser environment\n      this.canvas = document.createElement(\"canvas\");\n      this.canvas.width = config.width;\n      this.canvas.height = config.height;\n      this.ctx = this.canvas.getContext(\"2d\")!;\n    } else {\n      throw new Error(\"Canvas not available in this environment\");\n    }\n\n    // Disable anti-aliasing for pixel-perfect rendering\n    this.ctx.imageSmoothingEnabled = false;\n    if (\"textBaseline\" in this.ctx) {\n      this.ctx.textBaseline = \"top\";\n    }\n  }\n\n  setRenderer(renderer: AnimationRenderer) {\n    this.currentRenderer = renderer;\n  }\n\n  async render(frame: AnimationFrame): Promise<Buffer> {\n    const { ctx, config } = this;\n\n    // Clear canvas\n    ctx.clearRect(0, 0, config.width, config.height);\n\n    // Fill with black background\n    ctx.fillStyle = \"#000\";\n    ctx.fillRect(0, 0, config.width, config.height);\n\n    // Render current animation\n    if (this.currentRenderer) {\n      this.currentRenderer(ctx, frame, config);\n    }\n\n    // Convert to binary (black and white only)\n    const imageData = ctx.getImageData(0, 0, config.width, config.height);\n    const data = imageData.data;\n\n    for (let i = 0; i < data.length; i += 4) {\n      const brightness = (data[i] + data[i + 1] + data[i + 2]) / 3;\n      const binary = brightness > 127 ? 255 : 0;\n      data[i] = binary;\n      data[i + 1] = binary;\n      data[i + 2] = binary;\n      data[i + 3] = 255;\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n\n    // Convert canvas to buffer\n    if (this.canvas instanceof OffscreenCanvas) {\n      const blob = await this.canvas.convertToBlob({ type: \"image/png\" });\n      const arrayBuffer = await blob.arrayBuffer();\n      return Buffer.from(arrayBuffer);\n    } else {\n      // For regular canvas, use toDataURL and convert to buffer\n      const dataUrl = (this.canvas as HTMLCanvasElement).toDataURL(\"image/png\");\n      const base64 = dataUrl.split(\",\")[1];\n      return Buffer.from(base64, \"base64\");\n    }\n  }\n\n  getConfig() {\n    return this.config;\n  }\n}\n\n// Re-export types for convenience\nexport type { DisplayConfig, AnimationFrame, AnimationRenderer };\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM;IACH,OAA4C;IAC5C,IAAkE;IAClE,OAAsB;IACtB,kBAA4C,KAAK;IAEzD,YAAY,MAAqB,CAAE;QACjC,IAAI,CAAC,MAAM,GAAG;QAEd,6FAA6F;QAC7F,IAAI,OAAO,oBAAoB,aAAa;YAC1C,IAAI,CAAC,MAAM,GAAG,IAAI,gBAAgB,OAAO,KAAK,EAAE,OAAO,MAAM;YAC7D,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QACpC,OAAO,IAAI,OAAO,aAAa,aAAa;YAC1C,oDAAoD;YACpD,IAAI,CAAC,MAAM,GAAG,SAAS,aAAa,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,OAAO,KAAK;YAChC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,MAAM;YAClC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QACpC,OAAO;YACL,MAAM,IAAI,MAAM;QAClB;QAEA,oDAAoD;QACpD,IAAI,CAAC,GAAG,CAAC,qBAAqB,GAAG;QACjC,IAAI,kBAAkB,IAAI,CAAC,GAAG,EAAE;YAC9B,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG;QAC1B;IACF;IAEA,YAAY,QAA2B,EAAE;QACvC,IAAI,CAAC,eAAe,GAAG;IACzB;IAEA,MAAM,OAAO,KAAqB,EAAmB;QACnD,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,IAAI;QAE5B,eAAe;QACf,IAAI,SAAS,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;QAE/C,6BAA6B;QAC7B,IAAI,SAAS,GAAG;QAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;QAE9C,2BAA2B;QAC3B,IAAI,IAAI,CAAC,eAAe,EAAE;YACxB,IAAI,CAAC,eAAe,CAAC,KAAK,OAAO;QACnC;QAEA,2CAA2C;QAC3C,MAAM,YAAY,IAAI,YAAY,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;QACpE,MAAM,OAAO,UAAU,IAAI;QAE3B,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,KAAK,EAAG;YACvC,MAAM,aAAa,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,EAAE,IAAI;YAC3D,MAAM,SAAS,aAAa,MAAM,MAAM;YACxC,IAAI,CAAC,EAAE,GAAG;YACV,IAAI,CAAC,IAAI,EAAE,GAAG;YACd,IAAI,CAAC,IAAI,EAAE,GAAG;YACd,IAAI,CAAC,IAAI,EAAE,GAAG;QAChB;QAEA,IAAI,YAAY,CAAC,WAAW,GAAG;QAE/B,2BAA2B;QAC3B,IAAI,IAAI,CAAC,MAAM,YAAY,iBAAiB;YAC1C,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;gBAAE,MAAM;YAAY;YACjE,MAAM,cAAc,MAAM,KAAK,WAAW;YAC1C,OAAO,OAAO,IAAI,CAAC;QACrB,OAAO;YACL,0DAA0D;YAC1D,MAAM,UAAU,AAAC,IAAI,CAAC,MAAM,CAAuB,SAAS,CAAC;YAC7D,MAAM,SAAS,QAAQ,KAAK,CAAC,IAAI,CAAC,EAAE;YACpC,OAAO,OAAO,IAAI,CAAC,QAAQ;QAC7B;IACF;IAEA,YAAY;QACV,OAAO,IAAI,CAAC,MAAM;IACpB;AACF","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/display/settings.ts"],"sourcesContent":["export const FPS = 15;\n\nexport const LAYOUT = [\n  [3, 2, 1],\n  [4, 5, 6],\n  [9, 8, 7],\n  [10, 11, 12],\n];\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,MAAM;AAEZ,MAAM,SAAS;IACpB;QAAC;QAAG;QAAG;KAAE;IACT;QAAC;QAAG;QAAG;KAAE;IACT;QAAC;QAAG;QAAG;KAAE;IACT;QAAC;QAAI;QAAI;KAAG;CACb","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/animations/star-bounce.ts"],"sourcesContent":["import type { AnimationRenderer } from \".././display/types\";\n\nexport const starBounceMetadata = {\n  id: \"star-bounce\",\n  name: \"Star animation\",\n  description: \"Displays a star that moves in different directions\",\n  status: \"Equiped\" as const,\n};\n\nexport const starBounceAnimation: AnimationRenderer = (ctx, frame, config) => {\n  const { width, height } = config;\n  const { elapsedTime } = frame;\n\n  // Draw a bouncing star\n  const size = 8;\n  const w = width - size;\n  const sine = Math.sin(elapsedTime / 1000);\n  const x = Math.floor(((sine + 1) / 2) * w);\n  const y = height / 2 - size / 2;\n\n  if (!ctx) return;\n  ctx.fillStyle = \"#fff\";\n  ctx.beginPath();\n  ctx.arc(x + size / 2, y + size / 2, size / 2, 0, Math.PI * 2);\n  ctx.fill();\n};\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,qBAAqB;IAChC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,QAAQ;AACV;AAEO,MAAM,sBAAyC,CAAC,KAAK,OAAO;IACjE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;IAC1B,MAAM,EAAE,WAAW,EAAE,GAAG;IAExB,uBAAuB;IACvB,MAAM,OAAO;IACb,MAAM,IAAI,QAAQ;IAClB,MAAM,OAAO,KAAK,GAAG,CAAC,cAAc;IACpC,MAAM,IAAI,KAAK,KAAK,CAAC,AAAC,CAAC,OAAO,CAAC,IAAI,IAAK;IACxC,MAAM,IAAI,SAAS,IAAI,OAAO;IAE9B,IAAI,CAAC,KAAK;IACV,IAAI,SAAS,GAAG;IAChB,IAAI,SAAS;IACb,IAAI,GAAG,CAAC,IAAI,OAAO,GAAG,IAAI,OAAO,GAAG,OAAO,GAAG,GAAG,KAAK,EAAE,GAAG;IAC3D,IAAI,IAAI;AACV","debugId":null}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/animations/timer.ts"],"sourcesContent":["import type { AnimationRenderer } from \".././display/types\";\n\nexport const timerMetadata = {\n  id: \"timer\",\n  name: \"Timer animation\",\n  description: \"Displays elapsed time in seconds\",\n  status: \"Available\" as const,\n};\n\nexport const timerAnimation: AnimationRenderer = (ctx, frame, config) => {\n  const { elapsedTime } = frame;\n  const text = (elapsedTime / 1000).toFixed(2);\n\n  if (!ctx) return;\n\n  ctx.fillStyle = \"#fff\";\n  ctx.font = \"14px monospace\";\n\n  const metrics = ctx.measureText(text);\n  ctx.fillText(text, 2, 2);\n};\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,gBAAgB;IAC3B,IAAI;IACJ,MAAM;IACN,aAAa;IACb,QAAQ;AACV;AAEO,MAAM,iBAAoC,CAAC,KAAK,OAAO;IAC5D,MAAM,EAAE,WAAW,EAAE,GAAG;IACxB,MAAM,OAAO,CAAC,cAAc,IAAI,EAAE,OAAO,CAAC;IAE1C,IAAI,CAAC,KAAK;IAEV,IAAI,SAAS,GAAG;IAChB,IAAI,IAAI,GAAG;IAEX,MAAM,UAAU,IAAI,WAAW,CAAC;IAChC,IAAI,QAAQ,CAAC,MAAM,GAAG;AACxB","debugId":null}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/animations/logo.ts"],"sourcesContent":["import type { AnimationRenderer } from \".././display/types\";\n\nexport const logoMetadata = {\n  id: \"logo\",\n  name: \"Logo animation\",\n  description: \"Displays the OWOW logo\",\n  status: \"Available\" as const,\n};\n\nexport const logoAnimation: AnimationRenderer = (ctx, frame, config) => {\n  const { width } = config;\n  const text = \"OWOW\";\n\n  if (!ctx) return;\n\n  ctx.fillStyle = \"#fff\";\n  ctx.font = \"bold 12px sans-serif\";\n\n  const metrics = ctx.measureText(text);\n  ctx.fillText(text, width - metrics.width - 2, 2);\n};\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAe;IAC1B,IAAI;IACJ,MAAM;IACN,aAAa;IACb,QAAQ;AACV;AAEO,MAAM,gBAAmC,CAAC,KAAK,OAAO;IAC3D,MAAM,EAAE,KAAK,EAAE,GAAG;IAClB,MAAM,OAAO;IAEb,IAAI,CAAC,KAAK;IAEV,IAAI,SAAS,GAAG;IAChB,IAAI,IAAI,GAAG;IAEX,MAAM,UAAU,IAAI,WAAW,CAAC;IAChC,IAAI,QAAQ,CAAC,MAAM,QAAQ,QAAQ,KAAK,GAAG,GAAG;AAChD","debugId":null}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/animations/wave.ts"],"sourcesContent":["import type { AnimationRenderer } from \".././display/types\";\n\nexport const waveMetadata = {\n  id: \"wave\",\n  name: \"Wave animation\",\n  description: \"A sine wave that moves across the screen\",\n  thumbnail: \"/api/thumbnail/wave\",\n  status: \"Available\" as const,\n};\n\nexport const waveAnimation: AnimationRenderer = (ctx, frame, config) => {\n  if (!ctx) return;\n  const { width, height } = config;\n  const { elapsedTime } = frame;\n\n  ctx.fillStyle = \"#fff\";\n\n  // Draw a sine wave\n  const amplitude = height / 3;\n  const frequency = 0.05;\n  const speed = 0.002;\n\n  for (let x = 0; x < width; x++) {\n    const y =\n      height / 2 + Math.sin(x * frequency + elapsedTime * speed) * amplitude;\n\n    // Draw a small circle at each point\n    ctx.beginPath();\n    ctx.arc(x, Math.floor(y), 1, 0, Math.PI * 2);\n    ctx.fill();\n  }\n};\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAe;IAC1B,IAAI;IACJ,MAAM;IACN,aAAa;IACb,WAAW;IACX,QAAQ;AACV;AAEO,MAAM,gBAAmC,CAAC,KAAK,OAAO;IAC3D,IAAI,CAAC,KAAK;IACV,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;IAC1B,MAAM,EAAE,WAAW,EAAE,GAAG;IAExB,IAAI,SAAS,GAAG;IAEhB,mBAAmB;IACnB,MAAM,YAAY,SAAS;IAC3B,MAAM,YAAY;IAClB,MAAM,QAAQ;IAEd,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,IAAK;QAC9B,MAAM,IACJ,SAAS,IAAI,KAAK,GAAG,CAAC,IAAI,YAAY,cAAc,SAAS;QAE/D,oCAAoC;QACpC,IAAI,SAAS;QACb,IAAI,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,IAAI,GAAG,GAAG,KAAK,EAAE,GAAG;QAC1C,IAAI,IAAI;IACV;AACF","debugId":null}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/animations/text-scroll.ts"],"sourcesContent":["import type { AnimationRenderer } from \".././display/types\";\n\nexport const textScrollMetadata = {\n  id: \"text-scroll\",\n  name: \"Text scroll\",\n  description: \"Scrolling text message across the display\",\n  thumbnail: \"/api/thumbnail/text-scroll\",\n  status: \"Available\" as const,\n};\n\nexport const textScrollAnimation: AnimationRenderer = (ctx, frame, config) => {\n  if (!ctx) return;\n  const { width, height } = config;\n  const { elapsedTime } = frame;\n\n  const text = \"HELLO WORLD! \";\n\n  ctx.fillStyle = \"#fff\";\n  ctx.font = \"12px monospace\";\n\n  // Calculate scroll position\n  const scrollSpeed = 0.05;\n  const textWidth = ctx.measureText(text).width;\n  const offset = (elapsedTime * scrollSpeed) % (textWidth + width);\n\n  // Draw text scrolling from right to left\n  const x = width - offset;\n  const y = height / 2 - 6;\n\n  ctx.fillText(text, Math.floor(x), Math.floor(y));\n\n  // Draw second copy for seamless loop\n  if (x < 0) {\n    ctx.fillText(text, Math.floor(x + textWidth), Math.floor(y));\n  }\n};\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,qBAAqB;IAChC,IAAI;IACJ,MAAM;IACN,aAAa;IACb,WAAW;IACX,QAAQ;AACV;AAEO,MAAM,sBAAyC,CAAC,KAAK,OAAO;IACjE,IAAI,CAAC,KAAK;IACV,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;IAC1B,MAAM,EAAE,WAAW,EAAE,GAAG;IAExB,MAAM,OAAO;IAEb,IAAI,SAAS,GAAG;IAChB,IAAI,IAAI,GAAG;IAEX,4BAA4B;IAC5B,MAAM,cAAc;IACpB,MAAM,YAAY,IAAI,WAAW,CAAC,MAAM,KAAK;IAC7C,MAAM,SAAS,AAAC,cAAc,cAAe,CAAC,YAAY,KAAK;IAE/D,yCAAyC;IACzC,MAAM,IAAI,QAAQ;IAClB,MAAM,IAAI,SAAS,IAAI;IAEvB,IAAI,QAAQ,CAAC,MAAM,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC;IAE7C,qCAAqC;IACrC,IAAI,IAAI,GAAG;QACT,IAAI,QAAQ,CAAC,MAAM,KAAK,KAAK,CAAC,IAAI,YAAY,KAAK,KAAK,CAAC;IAC3D;AACF","debugId":null}},
    {"offset": {"line": 330, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/animations/index.ts"],"sourcesContent":["import { starBounceAnimation, starBounceMetadata } from \"././star-bounce\";\nimport { timerAnimation, timerMetadata } from \"././timer\";\nimport { logoAnimation, logoMetadata } from \"././logo\";\nimport { waveAnimation, waveMetadata } from \"././wave\";\nimport { textScrollAnimation, textScrollMetadata } from \"././text-scroll\";\n\nexport const animations = {\n  \"star-bounce\": {\n    renderer: starBounceAnimation,\n    metadata: starBounceMetadata,\n  },\n  timer: { renderer: timerAnimation, metadata: timerMetadata },\n  logo: { renderer: logoAnimation, metadata: logoMetadata },\n  wave: { renderer: waveAnimation, metadata: waveMetadata },\n  \"text-scroll\": {\n    renderer: textScrollAnimation,\n    metadata: textScrollMetadata,\n  },\n};\n\nexport type AnimationId = keyof typeof animations;\n\nexport function getAnimation(id: AnimationId) {\n  return animations[id];\n}\n\nexport function getAllAnimations() {\n  return Object.values(animations).map((anim) => anim.metadata);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,MAAM,aAAa;IACxB,eAAe;QACb,UAAU,8KAAmB;QAC7B,UAAU,6KAAkB;IAC9B;IACA,OAAO;QAAE,UAAU,gKAAc;QAAE,UAAU,+JAAa;IAAC;IAC3D,MAAM;QAAE,UAAU,8JAAa;QAAE,UAAU,6JAAY;IAAC;IACxD,MAAM;QAAE,UAAU,8JAAa;QAAE,UAAU,6JAAY;IAAC;IACxD,eAAe;QACb,UAAU,8KAAmB;QAC7B,UAAU,6KAAkB;IAC9B;AACF;AAIO,SAAS,aAAa,EAAe;IAC1C,OAAO,UAAU,CAAC,GAAG;AACvB;AAEO,SAAS;IACd,OAAO,OAAO,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC,OAAS,KAAK,QAAQ;AAC9D","debugId":null}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicokornuijt/OwowProject/owowapp/src/lib/animation-engine.ts"],"sourcesContent":["import \"server-only\";\nimport { Ticker } from \"./display/ticker\";\nimport { DisplayManager } from \"./display/display-manager\";\nimport { FPS } from \"./display/settings\";\nimport { getAnimation, type AnimationId } from \"./animations\";\n\nclass AnimationEngine {\n  private displayManager: DisplayManager;\n  private ticker: Ticker;\n  private currentAnimationId: AnimationId | null = null;\n  private latestFrame: Buffer | null = null;\n  private isRunning = false;\n\n  constructor() {\n    // 80x20 pixel display\n    this.displayManager = new DisplayManager({\n      width: 80,\n      height: 20,\n      fps: FPS,\n    });\n\n    this.ticker = new Ticker({ fps: FPS });\n  }\n\n  start(animationId: AnimationId) {\n    const animation = getAnimation(animationId);\n    if (!animation) {\n      throw new Error(`Animation ${animationId} not found`);\n    }\n\n    this.currentAnimationId = animationId;\n    this.displayManager.setRenderer(animation.renderer);\n\n    if (!this.isRunning) {\n      this.isRunning = true;\n      this.ticker.start(async (frame) => {\n        this.latestFrame = await this.displayManager.render(frame);\n      });\n    }\n  }\n\n  stop() {\n    this.ticker.stop();\n    this.isRunning = false;\n    this.latestFrame = null;\n  }\n\n  getLatestFrame(): Buffer | null {\n    return this.latestFrame;\n  }\n\n  getCurrentAnimationId(): AnimationId | null {\n    return this.currentAnimationId;\n  }\n}\n\n// Singleton instance\nexport const animationEngine = new AnimationEngine();\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM;IACI,eAA+B;IAC/B,OAAe;IACf,qBAAyC,KAAK;IAC9C,cAA6B,KAAK;IAClC,YAAY,MAAM;IAE1B,aAAc;QACZ,sBAAsB;QACtB,IAAI,CAAC,cAAc,GAAG,IAAI,0KAAc,CAAC;YACvC,OAAO;YACP,QAAQ;YACR,KAAK,qJAAG;QACV;QAEA,IAAI,CAAC,MAAM,GAAG,IAAI,sJAAM,CAAC;YAAE,KAAK,qJAAG;QAAC;IACtC;IAEA,MAAM,WAAwB,EAAE;QAC9B,MAAM,YAAY,IAAA,8JAAY,EAAC;QAC/B,IAAI,CAAC,WAAW;YACd,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,YAAY,UAAU,CAAC;QACtD;QAEA,IAAI,CAAC,kBAAkB,GAAG;QAC1B,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,QAAQ;QAElD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAG;YACjB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO;gBACvB,IAAI,CAAC,WAAW,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;YACtD;QACF;IACF;IAEA,OAAO;QACL,IAAI,CAAC,MAAM,CAAC,IAAI;QAChB,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,WAAW,GAAG;IACrB;IAEA,iBAAgC;QAC9B,OAAO,IAAI,CAAC,WAAW;IACzB;IAEA,wBAA4C;QAC1C,OAAO,IAAI,CAAC,kBAAkB;IAChC;AACF;AAGO,MAAM,kBAAkB,IAAI","debugId":null}},
    {"offset": {"line": 441, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}